<!DOCTYPE html>
<html lang="en">
  <head>
    <title>

ALICE data transfer to PDSF

</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
<!-- <link rel="stylesheet" href="../static/mp/css/docs.min.css"> -->
<!-- <link rel="stylesheet" href="../static/mp/css/bg.css"> -->
<!-- <link rel="stylesheet" href="../static/mp/css/_navbar.css"> -->
<!-- link href="http://portal.nersc.gov/project/alice/ploskon/static/static_extra/resources/mp/css/docs.min.css" rel="stylesheet"> -->
<!-- <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"> -->
<!-- <link href="https://getbootstrap.com/assets/css/docs.min.css" rel="stylesheet"> -->
<link href="static/mp/css/bgfiti.css" rel="stylesheet">
<link href="static/mp/css/navbar.css" rel="stylesheet">
<link href="static/mp/css/sublevel-dropdown.css" rel="stylesheet">
<link href="static/mp/css/other.css" rel="stylesheet">
<link rel="stylesheet" href="../static/mp/css/pygments.css">
<!--<link href="http://portal.nersc.gov/project/alice/ploskon/static/static_extra/resources/mp/css/tomorrow-night.css" rel="stylesheet"> -->

  </head>
  <body>
    
	
<!-- Static navbar -->
<!-- <nav class="navbar navbar-default navbar-fixed-top navbar-inverse" id="nav-navbar"> -->
<nav class="navbar navbar-fixed-top navbar-inverse" id="nav-navbar">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="true" aria-controls="navbar">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="../index.html">home</a>
			<a class="navbar-brand" href="#">top</a>
		</div>
		<div id="navbar" class="navbar-collapse collapse">
			<ul class="nav navbar-nav navbar-left">
				<li class="dropdown">
					
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">pages<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
	<li class="dropdown-header">Local links...</li>
	
	<li>
		<a href="../markdown/index.html"> Useful things on markdown
			<small>
				
				
				<span class="label label-default"> code </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../pythia_hand/index.html"> PYTHIA Handy
			<small>
				
				
				<span class="label label-default"> physics </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../muon_calo_ed/index.html"> ALICE Muon-Calo trigger event display
			<small>
				
				
				<span class="label label-default"> physics </span>
				
				<span class="label label-default"> alice </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../index/index.html"> MP Home page
			<small>
				
				
				<span class="label label-default"> general </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../students_hepsoft/index.html"> A custom HEP software installation
			<small>
				
				
				<span class="label label-default"> students </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../pyroot/index.html"> PyROOT
			<small>
				
				
				<span class="label label-default"> code </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../lhc_experiments/index.html"> LHC Experiments
			<small>
				
				
				<span class="label label-default"> physics </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../students_start_here/index.html"> Start Here
			<small>
				
				
				<span class="label label-default"> students </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../jet_notes/index.html"> Jet substructure
			<small>
				
				
				<span class="label label-default"> physics </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../tests/index.html"> All sorts of tests
			<small>
				
				
				<span class="label label-default"> misc </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../alice_sim_pdsf/index.html"> ALICE simulation on PDSF
			<small>
				
				
				<span class="label label-default"> alice </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="index.html"> ALICE data transfer to PDSF
			<small>
				
				
				<span class="label label-default"> alice </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../pythia_examples_cc/index.html"> PYTHIA8 *.cc examples
			<small>
				
				
				<span class="label label-default"> physics </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../latex/index.html"> Latex things
			<small>
				
				
				<span class="label label-default"> code </span>
				
				<span class="label label-default"> tools </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../novel_hf/index.html"> Novel methods for heavy-flavor studies
			<small>
				
				
				<span class="label label-default"> physics </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../bootstrap/index.html"> Bootstrap
			<small>
				
				
				<span class="label label-default"> code </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../lbltb/index.html"> LBL Test Beam Graphed
			<small>
				
				
				<span class="label label-default"> code </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../eic/index.html"> Electron-Ion C.
			<small>
				
				
				<span class="label label-default"> physics </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../misc_refs/index.html"> Miscellaneous refs
			<small>
				
				
				<span class="label label-default"> physics </span>
				
				        
			</small>
		</a>
	</li>
	
</ul>
					
				</li>
				
					<li class="dropdown">
						
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">code<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
	<li class="dropdown-header">Local links...</li>
	
	<li>
		<a href="../markdown/index.html"> Useful things on markdown
			<small>
				
					
						<span class="label label-default"> code </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../pyroot/index.html"> PyROOT
			<small>
				
					
						<span class="label label-default"> code </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../latex/index.html"> Latex things
			<small>
				
					
						<span class="label label-default"> code </span>
					
						<span class="label label-default"> tools </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../bootstrap/index.html"> Bootstrap
			<small>
				
					
						<span class="label label-default"> code </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../lbltb/index.html"> LBL Test Beam Graphed
			<small>
				
					
						<span class="label label-default"> code </span>
					
				        
			</small>
		</a>
	</li>
	
</ul>
						
					</li>
				
					<li class="dropdown">
						
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">physics<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
	<li class="dropdown-header">Local links...</li>
	
	<li>
		<a href="../pythia_hand/index.html"> PYTHIA Handy
			<small>
				
					
						<span class="label label-default"> physics </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../muon_calo_ed/index.html"> ALICE Muon-Calo trigger event display
			<small>
				
					
						<span class="label label-default"> physics </span>
					
						<span class="label label-default"> alice </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../lhc_experiments/index.html"> LHC Experiments
			<small>
				
					
						<span class="label label-default"> physics </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../jet_notes/index.html"> Jet substructure
			<small>
				
					
						<span class="label label-default"> physics </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../pythia_examples_cc/index.html"> PYTHIA8 *.cc examples
			<small>
				
					
						<span class="label label-default"> physics </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../novel_hf/index.html"> Novel methods for heavy-flavor studies
			<small>
				
					
						<span class="label label-default"> physics </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../eic/index.html"> Electron-Ion C.
			<small>
				
					
						<span class="label label-default"> physics </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../misc_refs/index.html"> Miscellaneous refs
			<small>
				
					
						<span class="label label-default"> physics </span>
					
				        
			</small>
		</a>
	</li>
	
</ul>
						
					</li>
				
					<li class="dropdown">
						
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">alice<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
	<li class="dropdown-header">Local links...</li>
	
	<li>
		<a href="../muon_calo_ed/index.html"> ALICE Muon-Calo trigger event display
			<small>
				
					
						<span class="label label-default"> physics </span>
					
						<span class="label label-default"> alice </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../alice_sim_pdsf/index.html"> ALICE simulation on PDSF
			<small>
				
					
						<span class="label label-default"> alice </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="index.html"> ALICE data transfer to PDSF
			<small>
				
					
						<span class="label label-default"> alice </span>
					
				        
			</small>
		</a>
	</li>
	
</ul>
						
					</li>
				
					<li class="dropdown">
						
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">general<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
	<li class="dropdown-header">Local links...</li>
	
	<li>
		<a href="../index/index.html"> MP Home page
			<small>
				
					
						<span class="label label-default"> general </span>
					
				        
			</small>
		</a>
	</li>
	
</ul>
						
					</li>
				
					<li class="dropdown">
						
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">students<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
	<li class="dropdown-header">Local links...</li>
	
	<li>
		<a href="../students_hepsoft/index.html"> A custom HEP software installation
			<small>
				
					
						<span class="label label-default"> students </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../students_start_here/index.html"> Start Here
			<small>
				
					
						<span class="label label-default"> students </span>
					
				        
			</small>
		</a>
	</li>
	
</ul>
						
					</li>
				
					<li class="dropdown">
						
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">misc<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
	<li class="dropdown-header">Local links...</li>
	
	<li>
		<a href="../tests/index.html"> All sorts of tests
			<small>
				
					
						<span class="label label-default"> misc </span>
					
				        
			</small>
		</a>
	</li>
	
</ul>
						
					</li>
				
					<li class="dropdown">
						
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">tools<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
	<li class="dropdown-header">Local links...</li>
	
	<li>
		<a href="../latex/index.html"> Latex things
			<small>
				
					
						<span class="label label-default"> code </span>
					
						<span class="label label-default"> tools </span>
					
				        
			</small>
		</a>
	</li>
	
</ul>
						
					</li>
				
			</ul>
			</div><!--/.nav-collapse -->
		</div><!--/.container-fluid -->
	</nav>
	
	
<div id="wrap">
    <div class="container-fluid" id="main">
        <div class="row clearfix">
            <div class="col-md-12 column">
                <div class="well well-sm">
                    <div class="page-header">
                        
                        <div class="well well-sm">
                            <h1> ALICE data transfer to PDSF <small> Tue Sep 13 21:54:32 2016 </small> </h1>
                            
                            
	
	<span class="label label-default"> <a href="../tag/alice/index.html"><span class="glyphicon glyphicon-tag"></span> alice </a> </span>
	

                            
                            
                            
                            <h3> Transfer files to PDSF - setup by Markus </h3>
                            
                            
                            
<div class="btn-group">
	<button type="button" class="btn btn-primary btn-sm dropdown-toggle" data-toggle="dropdown">Contents...<span class="caret"></span></button>
	
	<ul class="dropdown-menu scrollable-menu" role="menu">

<li><a href="#automatic-via-web-iface">Automatic via web iface</a>
<li><a href="#behind-the-scenes">Behind the scenes</a></li>

</li>
<li><a href="#prepare-transfer-using-scripts">Prepare transfer using scripts</a>
<li><a href="#how-this-works">How this works...</a></li>
<li><a href="#request-a-transfer">Request a transfer</a></li>

</li>

</ul>

	
</div>

                            
                            
                            <h3></h3>
                        </div>
                    </div>
                    <div>
                        
                        </div> <div class="well well-sm"> <h1 id="automatic-via-web-iface">Automatic via web iface</h1><hr>
<ul>
<li>Go to <a class="btn btn-info btn-xs" href="http://portal-auth.nersc.gov/alice" target="_blank" title="Go to request..." type="button">http://portal-auth.nersc.gov/alice</a> and find a link <code>New request</code>.</li>
<li>Once you klick there you open a new form where you enter</li>
<li><code>period</code></li>
<li><code>reconstruction pass</code></li>
<li><code>data type</code> (<code>ESD</code> in case of ESDs, <code>AOD</code> or <code>AODx</code> for AOD productions) and a</li>
<li><code>run number</code> or a <code>list</code></li>
</ul>
<h2 id="behind-the-scenes">Behind the scenes</h2>
<p>The script for manual download will be handled by a cron job on dtn1 node. With this it is also possible to transfer several runs in one shot - tested with two in parallel.</p>
<p>Note that the cron jobs processing the request, distributing the jobs and launching them have timeouts of 5 min each - it can take up to 15 min until a job gets started.</p>
</div> <div class="well well-sm"> <h1 id="prepare-transfer-using-scripts">Prepare transfer using scripts</h1><hr>
<p><code>NOTE: Needs user to be in aliprod group</code></p>
<h2 id="how-this-works">How this works...</h2>
<ul>
<li>The whole stuff is under /projecta/projectdirs/aliprod/data/work</li>
<li>The system automatically distributes load to the different dtns</li>
<li>The token is renewed automatically. It goes under my name, using a long-lived proxy (the current one will expire in November)</li>
<li>There is a <em>small</em> monitoring: http://portal-auth.nersc.gov/alice . For more we are lacking the mount of projecta on portal-auth. Due to the last interventions it is currently down - please give me 5 minutes to launch it again.</li>
</ul>
<h2 id="request-a-transfer">Request a transfer</h2>
<p>In order to create a new transfer job you need the script <code>create_copy_filelist.sh</code>, It takes the following parameters:</p>
<ul>
<li>inputpath on ALIEN (<code>/alice/data/2016/LHC16n</code>)</li>
<li>outputpath on /projecta (<code>/global/projecta/projectdirs/aliprod/data/LHC16n</code>); keep in mind that the dtns do not have the symlink /projecta to /global/projecta</li>
<li>run number (<code>260710</code>)</li>
<li>pass (<code>muon_calo_pass1</code>)</li>
<li>optional (Filetype and archive - needed for AOD transfer, automatically handled for ESDs)</li>
</ul>
<p>The script will produce a textfile inside your pwd. This textfile needs to go to the directory <code>queued</code>. A cronjob on dtn1 will check for new jobs every 5 minutes and assign to a worker (as long as there is at least one worker with less than 5 transfers ongoing). Internally the transfer client is threaded (default: 10 threads), meaning that we are transferring 10 files in parallel.</p>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

	
		
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
		<!-- <script src="../static/mp/js/getServerTime.js"></script> -->
		<script src="../static/mp/js/getClientTime.js"></script>
		<!-- <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script> -->
		<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          config: ["MMLorHTML.js"],
          jax: ["input/TeX", "output/HTML-CSS", "output/NativeMML"],
          extensions: ["MathMenu.js", "MathZoom.js"]
        });
        </script>
		<script>
		window.twttr = (function (d,s,id) {
			var t, js, fjs = d.getElementsByTagName(s)[0];
			if (d.getElementById(id)) return; js=d.createElement(s); js.id=id; js.async=1;
			js.src="https://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
			return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
		}(document, "script", "twitter-wjs"));
		</script>
		<!-- script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script -->
	
	

      <footer class="bs-docs-footer text-muted" role="contentinfo" id="foot">
      <p> E-mail: mploskon @ lbl.gov </p>
      <p> Mail: 1 Cyclotron Road, Berkeley, CA, USA </p>
      <span class="label label-default" id="clientTime">not loaded</span>
      </footer>



  </body>
</html>
