<!DOCTYPE html>
<html lang="en">
  <head>
    <title>

ALICE simulation on PDSF

</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
<!-- <link rel="stylesheet" href="../static/mp/css/docs.min.css"> -->
<!-- <link rel="stylesheet" href="../static/mp/css/bg.css"> -->
<!-- <link rel="stylesheet" href="../static/mp/css/_navbar.css"> -->
<!-- link href="http://portal.nersc.gov/project/alice/ploskon/static/static_extra/resources/mp/css/docs.min.css" rel="stylesheet"> -->
<!-- <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"> -->
<!-- <link href="https://getbootstrap.com/assets/css/docs.min.css" rel="stylesheet"> -->
<link href="https://matplo.github.io/static/mp/css/bgfiti.css" rel="stylesheet">
<link href="https://matplo.github.io/static/mp/css/navbar.css" rel="stylesheet">
<link href="https://matplo.github.io/static/mp/css/sublevel-dropdown.css" rel="stylesheet">
<link href="https://matplo.github.io/static/mp/css/other.css" rel="stylesheet">
<link rel="stylesheet" href="../static/mp/css/pygments.css">
<!--<link href="http://portal.nersc.gov/project/alice/ploskon/static/static_extra/resources/mp/css/tomorrow-night.css" rel="stylesheet"> -->

  </head>
  <body>
    
	
<!-- Static navbar -->
<!-- <nav class="navbar navbar-default navbar-fixed-top navbar-inverse" id="nav-navbar"> -->
<nav class="navbar navbar-fixed-top navbar-inverse" id="nav-navbar">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="true" aria-controls="navbar">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="../index.html">home</a>
			<a class="navbar-brand" href="#">top</a>
		</div>
		<div id="navbar" class="navbar-collapse collapse">
			<ul class="nav navbar-nav navbar-left">
				<li class="dropdown">
					
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">pages<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
	<li class="dropdown-header">Local links...</li>
	
	<li>
		<a href="../markdown/index.html"> Useful things on markdown
			<small>
				
				
				<span class="label label-default"> code </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../pythia_hand/index.html"> PYTHIA Handy
			<small>
				
				
				<span class="label label-default"> physics </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../muon_calo_ed/index.html"> ALICE Muon-Calo trigger event display
			<small>
				
				
				<span class="label label-default"> physics </span>
				
				<span class="label label-default"> alice </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../index/index.html"> MP Home page
			<small>
				
				
				<span class="label label-default"> general </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../students_hepsoft/index.html"> A custom HEP software installation
			<small>
				
				
				<span class="label label-default"> students </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../pyroot/index.html"> PyROOT
			<small>
				
				
				<span class="label label-default"> code </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../lhc_experiments/index.html"> LHC Experiments
			<small>
				
				
				<span class="label label-default"> physics </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../students_start_here/index.html"> Start Here
			<small>
				
				
				<span class="label label-default"> students </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../jet_notes/index.html"> Jet substructure
			<small>
				
				
				<span class="label label-default"> physics </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../tests/index.html"> All sorts of tests
			<small>
				
				
				<span class="label label-default"> misc </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="index.html"> ALICE simulation on PDSF
			<small>
				
				
				<span class="label label-default"> alice </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../alice_file_transfer_pdsf/index.html"> ALICE data transfer to PDSF
			<small>
				
				
				<span class="label label-default"> alice </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../pythia_examples_cc/index.html"> PYTHIA8 *.cc examples
			<small>
				
				
				<span class="label label-default"> physics </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../latex/index.html"> Latex things
			<small>
				
				
				<span class="label label-default"> code </span>
				
				<span class="label label-default"> tools </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../novel_hf/index.html"> Novel methods for heavy-flavor studies
			<small>
				
				
				<span class="label label-default"> physics </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../bootstrap/index.html"> Bootstrap
			<small>
				
				
				<span class="label label-default"> code </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../lbltb/index.html"> LBL Test Beam Graphed
			<small>
				
				
				<span class="label label-default"> code </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../eic/index.html"> Electron-Ion C.
			<small>
				
				
				<span class="label label-default"> physics </span>
				
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../misc_refs/index.html"> Miscellaneous refs
			<small>
				
				
				<span class="label label-default"> physics </span>
				
				        
			</small>
		</a>
	</li>
	
</ul>
					
				</li>
				
					<li class="dropdown">
						
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">code<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
	<li class="dropdown-header">Local links...</li>
	
	<li>
		<a href="../markdown/index.html"> Useful things on markdown
			<small>
				
					
						<span class="label label-default"> code </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../pyroot/index.html"> PyROOT
			<small>
				
					
						<span class="label label-default"> code </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../latex/index.html"> Latex things
			<small>
				
					
						<span class="label label-default"> code </span>
					
						<span class="label label-default"> tools </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../bootstrap/index.html"> Bootstrap
			<small>
				
					
						<span class="label label-default"> code </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../lbltb/index.html"> LBL Test Beam Graphed
			<small>
				
					
						<span class="label label-default"> code </span>
					
				        
			</small>
		</a>
	</li>
	
</ul>
						
					</li>
				
					<li class="dropdown">
						
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">physics<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
	<li class="dropdown-header">Local links...</li>
	
	<li>
		<a href="../pythia_hand/index.html"> PYTHIA Handy
			<small>
				
					
						<span class="label label-default"> physics </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../muon_calo_ed/index.html"> ALICE Muon-Calo trigger event display
			<small>
				
					
						<span class="label label-default"> physics </span>
					
						<span class="label label-default"> alice </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../lhc_experiments/index.html"> LHC Experiments
			<small>
				
					
						<span class="label label-default"> physics </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../jet_notes/index.html"> Jet substructure
			<small>
				
					
						<span class="label label-default"> physics </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../pythia_examples_cc/index.html"> PYTHIA8 *.cc examples
			<small>
				
					
						<span class="label label-default"> physics </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../novel_hf/index.html"> Novel methods for heavy-flavor studies
			<small>
				
					
						<span class="label label-default"> physics </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../eic/index.html"> Electron-Ion C.
			<small>
				
					
						<span class="label label-default"> physics </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../misc_refs/index.html"> Miscellaneous refs
			<small>
				
					
						<span class="label label-default"> physics </span>
					
				        
			</small>
		</a>
	</li>
	
</ul>
						
					</li>
				
					<li class="dropdown">
						
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">alice<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
	<li class="dropdown-header">Local links...</li>
	
	<li>
		<a href="../muon_calo_ed/index.html"> ALICE Muon-Calo trigger event display
			<small>
				
					
						<span class="label label-default"> physics </span>
					
						<span class="label label-default"> alice </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="index.html"> ALICE simulation on PDSF
			<small>
				
					
						<span class="label label-default"> alice </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../alice_file_transfer_pdsf/index.html"> ALICE data transfer to PDSF
			<small>
				
					
						<span class="label label-default"> alice </span>
					
				        
			</small>
		</a>
	</li>
	
</ul>
						
					</li>
				
					<li class="dropdown">
						
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">general<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
	<li class="dropdown-header">Local links...</li>
	
	<li>
		<a href="../index/index.html"> MP Home page
			<small>
				
					
						<span class="label label-default"> general </span>
					
				        
			</small>
		</a>
	</li>
	
</ul>
						
					</li>
				
					<li class="dropdown">
						
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">students<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
	<li class="dropdown-header">Local links...</li>
	
	<li>
		<a href="../students_hepsoft/index.html"> A custom HEP software installation
			<small>
				
					
						<span class="label label-default"> students </span>
					
				        
			</small>
		</a>
	</li>
	
	<li>
		<a href="../students_start_here/index.html"> Start Here
			<small>
				
					
						<span class="label label-default"> students </span>
					
				        
			</small>
		</a>
	</li>
	
</ul>
						
					</li>
				
					<li class="dropdown">
						
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">misc<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
	<li class="dropdown-header">Local links...</li>
	
	<li>
		<a href="../tests/index.html"> All sorts of tests
			<small>
				
					
						<span class="label label-default"> misc </span>
					
				        
			</small>
		</a>
	</li>
	
</ul>
						
					</li>
				
					<li class="dropdown">
						
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">tools<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
	<li class="dropdown-header">Local links...</li>
	
	<li>
		<a href="../latex/index.html"> Latex things
			<small>
				
					
						<span class="label label-default"> code </span>
					
						<span class="label label-default"> tools </span>
					
				        
			</small>
		</a>
	</li>
	
</ul>
						
					</li>
				
			</ul>
			</div><!--/.nav-collapse -->
		</div><!--/.container-fluid -->
	</nav>
	
	
<div id="wrap">
    <div class="container-fluid" id="main">
        <div class="row clearfix">
            <div class="col-md-12 column">
                <div class="well well-sm">
                    <div class="page-header">
                        
                        <div class="well well-sm">
                            <h1> ALICE simulation on PDSF <small> Thu, May 4 2017 </small> </h1>
                            
                            
	
	<span class="label label-default"> <a href="../tag/alice/index.html"><span class="glyphicon glyphicon-tag"></span> alice </a> </span>
	

                            
                            
                            
                            <h3> A quick &#39;remember how-to...&#39; </h3>
                            
                            
                            
<div class="btn-group">
	<button type="button" class="btn btn-primary btn-sm dropdown-toggle" data-toggle="dropdown">Contents...<span class="caret"></span></button>
	
	<ul class="dropdown-menu scrollable-menu" role="menu">

<li><a href="#synopsis-notes">Synopsis notes...</a></li>
<li><a href="#what-i-did-to-generate-5-pythia-events">What I did to generate 5 PYTHIA events</a></li>
<li><a href="#useful-thingsfiles">Useful things/files</a></li>

</ul>

	
</div>

                            
                            
                            <h3></h3>
                        </div>
                    </div>
                    <div>
                        
                        </div> <div class="well well-sm"> <h1 id="synopsis-notes">Synopsis notes...</h1><hr>
<ul>
<li>At this point this is a record of what I did to get going... - one should be able to streamline/cleanup this (in particular to setup multiple jobs and use the PDSF batch system etc.)</li>
<li>This is using PDSF but no reason why it should not work locally (except the software version complications etc)</li>
<li>Note, the files produced will land in the current directory</li>
</ul>
</div> <div class="well well-sm"> <h1 id="what-i-did-to-generate-5-pythia-events">What I did to generate 5 PYTHIA events</h1><hr>
<p><strong>Note: this assumes you can successfuly do <code>alien-token-init &lt;your_user_name&gt;</code> on PDSF</strong> - we will need it to create a snapshot of the OCDB (this is more efficient and probably more robust than using <code>cvmfs</code> for all the OCDB - setting it up may be also cumbersome - following DPG is a good idea)</p>
<hr />
<ul>
<li>forked <code>AliDPG</code> on <a class="btn btn-default btn-xs" href="https://github.com/alisw/AliDPG" target="_blank">gihub</a> - my fork it is at <a class="btn btn-default btn-xs" href="https://github.com/matplo/AliDPG" target="_blank">https://github.com/matplo/AliDPG</a> and we will work there in the <code>MC_test</code> directory which is a copy of <code>MC</code> (the original dir)</li>
</ul>
<hr />
<ul>
<li>from a simulation run anchored to run <a class="btn btn-default btn-xs" href="https://alice-logbook.cern.ch/logbook/date_online.php?p_cont=rund&amp;p_run=244340" target="_blank"><code>#244340</code></a> centrally I learned the setup - good source of information is a production page on <a class="btn btn-default btn-xs" href="https://alimonitor.cern.ch/job_events.jsp?timesel=0&amp;owner=aliprod&amp;filter_run=244340:244340&amp;filter_jobtype=p-p%2C+5.02+TeV+-+jet-jet+Pythia+events+anchored+to+LHC15n%2C+test2%2C+ALIROOT-6823" target="_blank">alimonitor.cern.ch</a> (click the run number link - a pop-up should show the job setup details)</li>
</ul>
<hr />
<ul>
<li>on PDSF I run (the software versions follow exactly what was used in the above simulation)</li>
</ul>
<div class="codehilite"><pre>$ module use /cvmfs/alice.cern.ch/x86_64-2.6-gnu-4.1.2/Modules/modulefiles
$ module load AliDPG/v5-08-XX-17
$ module load AliPhysics/v5-08-13q-p2-01-1
</pre></div>


<hr />
<ul>
<li>I downloaded from grid the generator configuration <a class="btn btn-default btn-xs" href="https://github.com/matplo/AliDPG/blob/master/MC_test/GeneratorCustom.C" target="_blank">GeneratorCustom.C</a> (alien_cp from the alien directory of the central simulation) - <em>you will want to change it to your needs or use another pre-defined generator setting</em></li>
</ul>
<hr />
<ul>
<li>Created a snapshot of the OCDB (several option exist but the following should work - note, you may skip the first export and ignore the error from find...)</li>
</ul>
<div class="codehilite"><pre>$ <span class="nb">export</span> <span class="nv">ALIDPG_ROOT</span><span class="o">=</span>&lt;wherever your copy is&gt;
$ make <span class="nv">RUN</span><span class="o">=</span>244340
</pre></div>


<hr />
<ul>
<li>then I executed (this works <strong>after</strong> OCDB snapshop is created - w/o the <code>--ocdb snapshot</code> the script will attempt to create the snapshot first - see the <code>Makefile</code> - link below)</li>
</ul>
<div class="codehilite"><pre>./dpgsim.sh --run 244340 --generator --energy 5000 --generator Custom --energy 8000 --pthardbin 1 --nevents 5 --ocdb snapshot --mode full
</pre></div>


<ul>
<li>note the <code>--pthardbin 1</code> - this is just for one of many... (watch out for the files landing in the same directory - a cleaner setup is needed...)</li>
</ul>
</div> <div class="well well-sm"> <h1 id="useful-thingsfiles">Useful things/files</h1><hr>
<ul>
<li><a class="btn btn-default btn-xs" href="https://github.com/matplo/AliDPG/blob/master/MC_test/README" target="_blank"><code>README</code></a><ul>
<li>some explanations of what is what and the structure...</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li><a class="btn btn-default btn-xs" href="https://github.com/matplo/AliDPG/blob/master/MC_test/dpgsim.sh" target="_blank"><code>dpgsim.sh</code></a></li>
</ul>
<div class="codehilite"><pre># COMMAND_HELP=
./dpgsim.sh --mode &lt;mode&gt; --run &lt;run&gt; --generator &lt;generatorConfig&gt; --energy &lt;energy&gt; --system &lt;system&gt; --detector &lt;detectorConfig&gt; --magnet &lt;magnetConfig&gt; --simulation &lt;simulationConfig&gt; --reconstruction &lt;reconstructionConfig&gt; --uid &lt;uniqueID&gt; --nevents &lt;numberOfEvents&gt; --qa &lt;qaConfig&gt; --aod &lt;aodConfig&gt; --ocdb &lt;ocdbConfig&gt; --hlt &lt;hltConfig&gt;
</pre></div>


<hr />
<ul>
<li><a class="btn btn-default btn-xs" href="https://github.com/matplo/AliDPG/blob/master/MC_test/Makefile" target="_blank"><code>Makefile</code></a><ul>
<li>useful to lookup how to make the OCDB snapshot prior to running the simulation (and run a test)</li>
</ul>
</li>
</ul>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

	
		
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
		<!-- <script src="../static/mp/js/getServerTime.js"></script> -->
		<script src="../static/mp/js/getClientTime.js"></script>
		<!-- <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script> -->
		<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          config: ["MMLorHTML.js"],
          jax: ["input/TeX", "output/HTML-CSS", "output/NativeMML"],
          extensions: ["MathMenu.js", "MathZoom.js"]
        });
        </script>
		<script>
		window.twttr = (function (d,s,id) {
			var t, js, fjs = d.getElementsByTagName(s)[0];
			if (d.getElementById(id)) return; js=d.createElement(s); js.id=id; js.async=1;
			js.src="https://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
			return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
		}(document, "script", "twitter-wjs"));
		</script>
		<!-- script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script -->
	
	

      <footer class="bs-docs-footer text-muted" role="contentinfo" id="foot">
      <p> E-mail: mploskon @ lbl.gov </p>
      <p> Mail: 1 Cyclotron Road, Berkeley, CA, USA </p>
      <span class="label label-default" id="clientTime">not loaded</span>
      </footer>



  </body>
</html>
